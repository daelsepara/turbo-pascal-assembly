# SYSTEM.DMP

```
AX=FFFF  BX=0000  CX=0B64  DX=0000  SP=4000  BP=0000  SI=0000  DI=0000
DS=PSP   ES=PSP   SS=STCK  CS=CODE  IP=0000   NV UP EI PL NZ NA PO NC
```

```nasm
SYS0000: BACA07        MOV	DX,DATA
SYS0003: 8EDA          MOV	DS,DX
SYS0005: 8C063800      MOV	[PrefixSeg],ES
SYS0009: 33ED          XOR	BP,BP
SYS000B: E87205        CALL	0580
SYS000E: E8A000        CALL	00B1
SYS0011: 8BC4          MOV	AX,SP
SYS0013: 051300        ADD	AX,0013
SYS0016: B104          MOV	CL,04
SYS0018: D3E8          SHR	AX,CL
SYS001A: 8CD2          MOV	DX,SS
SYS001C: 03C2          ADD	AX,DX
SYS001E: A30A00        MOV	[OvrHeapOrg],AX
SYS0021: A30C00        MOV	[OvrHeapPtr],AX
SYS0024: 03060400      ADD	AX,[OvrHeapSize]
SYS0028: A30E00        MOV	[OvrHeapEnd],AX
SYS002B: A31800        MOV	[HeapOrg:SEG],AX
SYS002E: A31C00        MOV	[HeapPtr:SEG],AX
SYS0031: A32400        MOV	[FreeList:SEG],AX
SYS0034: 8E063800      MOV	ES,[PrefixSeg]
SYS0038: 26            ES:
SYS0039: A10200        MOV	AX,[OvrCodeList]
SYS003C: A32000        MOV	[HeapEnd:SEG],AX
SYS003F: C7062A00D600  MOV	WORD PTR [HeapError:OFF],00D6
SYS0045: 8C0E2C00      MOV	[HeapError:SEG],CS
SYS0049: BF5002        MOV	DI,0250
SYS004C: BE3902        MOV	SI,0239
SYS004F: B91300        MOV	CX,0013
SYS0052: 90            NOP
SYS0053: FC            CLD
SYS0054: 2E            CS:
SYS0055: AC            LODSB
SYS0056: B435          MOV	AH,35
SYS0058: CD21          INT	21
SYS005A: 891D          MOV	[DI],BX
SYS005C: 8C4502        MOV	[DI+02],ES
SYS005F: 83C704        ADD	DI,+04
SYS0062: E2EF          LOOP	0053
SYS0064: 1E            PUSH	DS
SYS0065: 0E            PUSH	CS
SYS0066: 1F            POP	DS
SYS0067: BA0C01        MOV	DX,010C
SYS006A: B80025        MOV	AX,2500
SYS006D: CD21          INT	21
SYS006F: BA1301        MOV	DX,0113
SYS0072: B82325        MOV	AX,2523
SYS0075: CD21          INT	21
SYS0077: BADB00        MOV	DX,00DB
SYS007A: B82425        MOV	AX,2524
SYS007D: CD21          INT	21
SYS007F: BA0401        MOV	DX,0104
SYS0082: B83F25        MOV	AX,253F
SYS0085: CD21          INT	21
SYS0087: 1F            POP	DS
SYS0088: B85000        MOV	AX,0050
SYS008B: 1E            PUSH	DS
SYS008C: 50            PUSH	AX
SYS008D: 1E            PUSH	DS
SYS008E: 50            PUSH	AX
SYS008F: B86302        MOV	AX,0263
SYS0092: 0E            PUSH	CS
SYS0093: 50            PUSH	AX
SYS0094: 0E            PUSH	CS
SYS0095: E84E02        CALL	02E6
SYS0098: 0E            PUSH	CS
SYS0099: E8C802        CALL	0364
SYS009C: B85001        MOV	AX,0150
SYS009F: 1E            PUSH	DS
SYS00A0: 50            PUSH	AX
SYS00A1: 1E            PUSH	DS
SYS00A2: 50            PUSH	AX
SYS00A3: B86302        MOV	AX,0263
SYS00A6: 0E            PUSH	CS
SYS00A7: 50            PUSH	AX
SYS00A8: 0E            PUSH	CS
SYS00A9: E83A02        CALL	02E6
SYS00AC: 0E            PUSH	CS
SYS00AD: E8B902        CALL	0369
SYS00B0: CB            RETF
SYS00B1: 33C0          XOR	AX,AX
SYS00B3: 9C            PUSHF
SYS00B4: 5B            POP	BX
SYS00B5: 80E70F        AND	BH,0F
SYS00B8: 53            PUSH	BX
SYS00B9: 9D            POPF
SYS00BA: 9C            PUSHF
SYS00BB: 59            POP	CX
SYS00BC: 80E5F0        AND	CH,F0
SYS00BF: 80FDF0        CMP	CH,F0
SYS00C2: 740E          JZ	00D2
SYS00C4: 40            INC	AX
SYS00C5: 80CFF0        OR	BH,F0
SYS00C8: 53            PUSH	BX
SYS00C9: 9D            POPF
SYS00CA: 9C            PUSHF
SYS00CB: 59            POP	CX
SYS00CC: 80E5F0        AND	CH,F0
SYS00CF: 7401          JZ	00D2
SYS00D1: 40            INC	AX
SYS00D2: A24C00        MOV	[Test8086],AL
SYS00D5: C3            RET
SYS00D6: 33C0          XOR	AX,AX
SYS00D8: CA0200        RETF	0002
SYS00DB: FB            STI
SYS00DC: 83C406        ADD	SP,+06
SYS00DF: 58            POP	AX
SYS00E0: 83E71F        AND	DI,+1F
SYS00E3: 81C79600      ADD	DI,0096
SYS00E7: 80FC39        CMP	AH,39
SYS00EA: 7303          JNB	00EF
SYS00EC: BFFFFF        MOV	DI,FFFF
SYS00EF: 57            PUSH	DI
SYS00F0: B454          MOV	AH,54
SYS00F2: CD21          INT	21
SYS00F4: 8BEC          MOV	BP,SP
SYS00F6: 804E1601      OR	BYTE PTR [BP+16],01
SYS00FA: 58            POP	AX
SYS00FB: 5B            POP	BX
SYS00FC: 59            POP	CX
SYS00FD: 5A            POP	DX
SYS00FE: 5E            POP	SI
SYS00FF: 5F            POP	DI
SYS0100: 5D            POP	BP
SYS0101: 1F            POP	DS
SYS0102: 07            POP	ES
SYS0103: CF            IRET
SYS0104: B8D000        MOV	AX,00D0
SYS0107: 83C406        ADD	SP,+06
SYS010A: EB03          JMP	010F
SYS010C: B8C800        MOV	AX,00C8
SYS010F: 59            POP	CX
SYS0110: 5B            POP	BX
SYS0111: EB07          JMP	011A
SYS0113: B8FF00        MOV	AX,00FF
SYS0116: 33C9          XOR	CX,CX
SYS0118: 33DB          XOR	BX,BX
SYS011A: BACA07        MOV	DX,DATA
SYS011D: 8EDA          MOV	DS,DX
SYS011F: FB            STI
SYS0120: A33200        MOV	[ExitCode],AX
SYS0123: 8BC1          MOV	AX,CX
SYS0125: 0BC3          OR	AX,BX
SYS0127: 743D          JZ	0166
SYS0129: A11000        MOV	AX,[OvrLoadList]
SYS012C: 0BC0          OR	AX,AX
SYS012E: 742F          JZ	015F
SYS0130: 8EC0          MOV	ES,AX
SYS0132: 26            ES:
SYS0133: A11000        MOV	AX,[OvrLoadList]
SYS0136: 0BC0          OR	AX,AX
SYS0138: 741B          JZ	0155
SYS013A: 2BC3          SUB	AX,BX
SYS013C: 7717          JA	0155
SYS013E: F7D8          NEG	AX
SYS0140: 3D0010        CMP	AX,1000
SYS0143: 7310          JNB	0155
SYS0145: BA1000        MOV	DX,0010
SYS0148: F7E2          MUL	DX
SYS014A: 03C1          ADD	AX,CX
SYS014C: 7207          JB	0155
SYS014E: 26            ES:
SYS014F: 3B060800      CMP	AX,[OvrDebugPtr:SEG]
SYS0153: 7206          JB	015B
SYS0155: 26            ES:
SYS0156: A11400        MOV	AX,[OvrEmsHandle]
SYS0159: EBD1          JMP	012C
SYS015B: 8BC8          MOV	CX,AX
SYS015D: 8CC3          MOV	BX,ES
SYS015F: 2B1E3800      SUB	BX,[PrefixSeg]
SYS0163: 83EB10        SUB	BX,+10
SYS0166: 890E3400      MOV	[ErrorAddr:OFF],CX
SYS016A: 891E3600      MOV	[ErrorAddr:SEG],BX
SYS016E: C41E2E00      LES	BX,[ExitProc]
SYS0172: 8CC0          MOV	AX,ES
SYS0174: 0BC3          OR	AX,BX
SYS0176: 7413          JZ	018B
SYS0178: 33C0          XOR	AX,AX
SYS017A: A32E00        MOV	[ExitProc:OFF],AX
SYS017D: A33000        MOV	[ExitProc:SEG],AX
SYS0180: A33C00        MOV	[InOutRes],AX
SYS0183: B86E01        MOV	AX,016E
SYS0186: 0E            PUSH	CS
SYS0187: 50            PUSH	AX
SYS0188: 06            PUSH	ES
SYS0189: 53            PUSH	BX
SYS018A: CB            RETF
SYS018B: B85000        MOV	AX,0050
SYS018E: 1E            PUSH	DS
SYS018F: 50            PUSH	AX
SYS0190: 0E            PUSH	CS
SYS0191: E82A02        CALL	03BE
SYS0194: B85001        MOV	AX,0150
SYS0197: 1E            PUSH	DS
SYS0198: 50            PUSH	AX
SYS0199: 0E            PUSH	CS
SYS019A: E82102        CALL	03BE
SYS019D: BF5002        MOV	DI,0250
SYS01A0: BE3902        MOV	SI,0239
SYS01A3: B91300        MOV	CX,0013
SYS01A6: 90            NOP
SYS01A7: FC            CLD
SYS01A8: 2E            CS:
SYS01A9: AC            LODSB
SYS01AA: B425          MOV	AH,25
SYS01AC: 1E            PUSH	DS
SYS01AD: C515          LDS	DX,[DI]
SYS01AF: CD21          INT	21
SYS01B1: 1F            POP	DS
SYS01B2: 83C704        ADD	DI,+04
SYS01B5: E2F0          LOOP	01A7
SYS01B7: A13400        MOV	AX,[ErrorAddr:OFF]
SYS01BA: 0B063600      OR	AX,[ErrorAddr:SEG]
SYS01BE: 7429          JZ	01E9
SYS01C0: BB4C02        MOV	BX,024C
SYS01C3: E82A00        CALL	01F0
SYS01C6: A13200        MOV	AX,[ExitCode]
SYS01C9: E83200        CALL	01FE
SYS01CC: BB5B02        MOV	BX,025B
SYS01CF: E81E00        CALL	01F0
SYS01D2: A13600        MOV	AX,[ErrorAddr:SEG]
SYS01D5: E84000        CALL	0218
SYS01D8: B03A          MOV	AL,3A
SYS01DA: E85500        CALL	0232
SYS01DD: A13400        MOV	AX,[ErrorAddr:OFF]
SYS01E0: E83500        CALL	0218
SYS01E3: BB6002        MOV	BX,0260
SYS01E6: E80700        CALL	01F0
SYS01E9: A13200        MOV	AX,[ExitCode]
SYS01EC: B44C          MOV	AH,4C
SYS01EE: CD21          INT	21
SYS01F0: 2E            CS:
SYS01F1: 8A07          MOV	AL,[BX]
SYS01F3: 0AC0          OR	AL,AL
SYS01F5: 7406          JZ	01FD
SYS01F7: E83800        CALL	0232
SYS01FA: 43            INC	BX
SYS01FB: EBF3          JMP	01F0
SYS01FD: C3            RET
SYS01FE: B164          MOV	CL,64
SYS0200: E80700        CALL	020A
SYS0203: B10A          MOV	CL,0A
SYS0205: E80200        CALL	020A
SYS0208: EB04          JMP	020E
SYS020A: 32E4          XOR	AH,AH
SYS020C: F6F1          DIV	CL
SYS020E: 0430          ADD	AL,30
SYS0210: 50            PUSH	AX
SYS0211: E81E00        CALL	0232
SYS0214: 58            POP	AX
SYS0215: 8AC4          MOV	AL,AH
SYS0217: C3            RET
SYS0218: 50            PUSH	AX
SYS0219: 8AC4          MOV	AL,AH
SYS021B: E80100        CALL	021F
SYS021E: 58            POP	AX
SYS021F: 50            PUSH	AX
SYS0220: B104          MOV	CL,04
SYS0222: D2E8          SHR	AL,CL
SYS0224: E80300        CALL	022A
SYS0227: 58            POP	AX
SYS0228: 240F          AND	AL,0F
SYS022A: 0430          ADD	AL,30
SYS022C: 3C3A          CMP	AL,3A
SYS022E: 7202          JB	0232
SYS0230: 0407          ADD	AL,07
SYS0232: 8AD0          MOV	DL,AL
SYS0234: B406          MOV	AH,06
SYS0236: CD21          INT	21
SYS0238: C3            RET

SYS0230:                             00 02 1B 21 23 24 34            ...!#$4
SYS0240:  35 36 37 38 39 3A 3B 3C-3D 3E 3F 75 52 75 6E 74   56789:;<=>?uRunt
SYS0250:  69 6D 65 20 65 72 72 6F-72 20 00 20 61 74 20 00   ime error . at .
SYS0260:  2E 0D 0A 00 50 6F 72 74-69 6F 6E 73 20 43 6F 70   ....Portions Cop
SYS0270:  79 72 69 67 68 74 20 28-63 29 20 31 39 38 33 2C   yright (c) 1983,
SYS0280:  39 32 20 42 6F 72 6C 61-6E 64                     92 Borland

SYS028A: 33C0          XOR	AX,AX
SYS028C: 87063C00      XCHG	AX,[InOutRes]
SYS0290: CB            RETF

SYS0291: 833E3C0000    CMP	WORD PTR [InOutRes],+00
SYS0296: 7501          JNZ	0299
SYS0298: CB            RETF

SYS0299: A13C00        MOV	AX,[InOutRes]
SYS029C: E970FE        JMP	010F

SYS029F: 8BF4          MOV	SI,SP
SYS02A1: 36            SS:
SYS02A2: 8E4402        MOV	ES,[SI+02]
SYS02A5: 26            ES:
SYS02A6: 3B5502        CMP	DX,[DI+02]
SYS02A9: 7F07          JG	02B2
SYS02AB: 7C14          JL	02C1
SYS02AD: 26            ES:
SYS02AE: 3B05          CMP	AX,[DI]
SYS02B0: 720F          JB	02C1
SYS02B2: 26            ES:
SYS02B3: 3B5506        CMP	DX,[DI+06]
SYS02B6: 7C08          JL	02C0
SYS02B8: 7F07          JG	02C1
SYS02BA: 26            ES:
SYS02BB: 3B4504        CMP	AX,[DI+04]
SYS02BE: 7701          JA	02C1
SYS02C0: CB            RETF
SYS02C1: B8C900        MOV	AX,00C9
SYS02C4: E948FE        JMP	010F
SYS02C7: B8D700        MOV	AX,00D7
SYS02CA: E942FE        JMP	010F
SYS02CD: 050002        ADD	AX,0200
SYS02D0: 720D          JB	02DF
SYS02D2: 2BC4          SUB	AX,SP
SYS02D4: 7309          JNB	02DF
SYS02D6: F7D8          NEG	AX
SYS02D8: 3B063A00      CMP	AX,[StackLimit]
SYS02DC: 7201          JB	02DF
SYS02DE: CB            RETF
SYS02DF: B8CA00        MOV	AX,00CA
SYS02E2: E92AFE        JMP	010F

SYS02E5: BA

SYS02E6: 33D2          XOR	DX,DX
SYS02E8: 8BDC          MOV	BX,SP
SYS02EA: 1E            PUSH	DS
SYS02EB: 36            SS:
SYS02EC: C47F08        LES	DI,[BX+08]
SYS02EF: 36            SS:
SYS02F0: C57704        LDS	SI,[BX+04]
SYS02F3: FC            CLD
SYS02F4: 33C0          XOR	AX,AX
SYS02F6: AB            STOSW
SYS02F7: B8B0D7        MOV	AX,fmClosed
SYS02FA: AB            STOSW
SYS02FB: B88000        MOV	AX,TextBuf
SYS02FE: AB            STOSW
SYS02FF: 33C0          XOR	AX,AX
SYS0301: AB            STOSW
SYS0302: AB            STOSW
SYS0303: AB            STOSW
SYS0304: 8D4574        LEA	AX,[DI+74]
SYS0307: AB            STOSW
SYS0308: 8CC0          MOV	AX,ES
SYS030A: AB            STOSW
SYS030B: B89904        MOV	AX,0499
SYS030E: AB            STOSW
SYS030F: B87007        MOV	AX,SYS
SYS0312: AB            STOSW
SYS0313: 33C0          XOR	AX,AX
SYS0315: B90E00        MOV	CX,000E
SYS0318: F3            REPZ
SYS0319: AB            STOSW
SYS031A: B94F00        MOV	CX,004F
SYS031D: 0BD2          OR	DX,DX
SYS031F: 7509          JNZ	032A
SYS0321: AC            LODSB
SYS0322: 3AC8          CMP	CL,AL
SYS0324: 7604          JBE	032A
SYS0326: 8AC8          MOV	CL,AL
SYS0328: E308          JCXZ	0332
SYS032A: AC            LODSB
SYS032B: 0AC0          OR	AL,AL
SYS032D: 7403          JZ	0332
SYS032F: AA            STOSB
SYS0330: E2F8          LOOP	032A
SYS0332: 32C0          XOR	AL,AL
SYS0334: AA            STOSB
SYS0335: 1F            POP	DS
SYS0336: CA0800        RETF	0008
SYS0339: 8BDC          MOV	BX,SP
SYS033B: 36            SS:
SYS033C: C47F0A        LES	DI,[BX+0A]
SYS033F: 36            SS:
SYS0340: 8B4704        MOV	AX,[BX+04]
SYS0343: 26            ES:
SYS0344: 894504        MOV	[DI:BufSize],AX
SYS0347: 36            SS:
SYS0348: 8B4706        MOV	AX,[BX+06]
SYS034B: 26            ES:
SYS034C: 89450C        MOV	[DI:BufPtr.Offset],AX
SYS034F: 36            SS:
SYS0350: 8B4708        MOV	AX,[BX+08]
SYS0353: 26            ES:
SYS0354: 89450E        MOV	[DI:BufPtr.Segment],AX
SYS0357: 33C0          XOR	AX,AX
SYS0359: 26            ES:
SYS035A: 894508        MOV	[DI:BufPos],AX
SYS035D: 26            ES:
SYS035E: 89450A        MOV	[DI:BufEnd],AX
SYS0361: CA0A00        RETF	000A
SYS0364: BAB1D7        MOV	DX,fmInput
SYS0367: EB08          JMP	0371
SYS0369: BAB2D7        MOV	DX,fmOutput
SYS036C: EB03          JMP	0371
SYS036E: BAB3D7        MOV	DX,fmInOut
SYS0371: 55            PUSH	BP
SYS0372: 8BEC          MOV	BP,SP
SYS0374: C47E06        LES	DI,[BP+06]
SYS0377: 26            ES:
SYS0378: 8B4502        MOV	AX,[DI:Mode]
SYS037B: 3DB1D7        CMP	AX,fmInput
SYS037E: 7412          JZ	0392
SYS0380: 3DB2D7        CMP	AX,fmOutput
SYS0383: 740D          JZ	0392
SYS0385: 3DB0D7        CMP	AX,fmClosed
SYS0388: 7410          JZ	039A
SYS038A: C7063C006600  MOV	WORD PTR [InOutRes],0066
SYS0390: EB24          JMP	03B6
SYS0392: 52            PUSH	DX
SYS0393: 06            PUSH	ES
SYS0394: 57            PUSH	DI
SYS0395: 0E            PUSH	CS
SYS0396: E82500        CALL	03BE
SYS0399: 5A            POP	DX
SYS039A: 33C0          XOR	AX,AX
SYS039C: 26            ES:
SYS039D: 895502        MOV	[DI:Mode],DX
SYS03A0: 26            ES:
SYS03A1: 894508        MOV	[DI:BufPos],AX
SYS03A4: 26            ES:
SYS03A5: 89450A        MOV	[DI:BufEnd],AX
SYS03A8: BB1000        MOV	BX,0010
SYS03AB: E84C00        CALL	03FA
SYS03AE: 7406          JZ	03B6
SYS03B0: 26            ES:
SYS03B1: C74502B0D7    MOV	WORD PTR [DI:Mode],fmClosed
SYS03B6: 5D            POP	BP
SYS03B7: CA0400        RETF	0004
SYS03BA: B000          MOV	AL,00
SYS03BC: EB02          JMP	03C0
SYS03BE: B001          MOV	AL,01
SYS03C0: 55            PUSH	BP
SYS03C1: 8BEC          MOV	BP,SP
SYS03C3: C47E06        LES	DI,[BP+06]
SYS03C6: 26            ES:
SYS03C7: 817D02B1D7    CMP	WORD PTR [DI:Mode],fmInput
SYS03CC: 7418          JZ	03E6
SYS03CE: 26            ES:
SYS03CF: 817D02B2D7    CMP	WORD PTR [DI:Mode],fmOutput
SYS03D4: 7408          JZ	03DE
SYS03D6: C7063C006700  MOV	WORD PTR [InOutRes],0067
SYS03DC: EB18          JMP	03F6
SYS03DE: 50            PUSH	AX
SYS03DF: BB1400        MOV	BX,0014
SYS03E2: E81500        CALL	03FA
SYS03E5: 58            POP	AX
SYS03E6: 0AC0          OR	AL,AL
SYS03E8: 740C          JZ	03F6
SYS03EA: BB1C00        MOV	BX,001C
SYS03ED: E80A00        CALL	03FA
SYS03F0: 26            ES:
SYS03F1: C74502B0D7    MOV	WORD PTR [DI:Mode],fmClosed
SYS03F6: 5D            POP	BP
SYS03F7: CA0400        RETF	0004
SYS03FA: 06            PUSH	ES
SYS03FB: 57            PUSH	DI
SYS03FC: 06            PUSH	ES
SYS03FD: 57            PUSH	DI
SYS03FE: 26            ES:
SYS03FF: FF19          CALL	FAR [BX+DI]
SYS0401: 0BC0          OR	AX,AX
SYS0403: 7403          JZ	0408
SYS0405: A33C00        MOV	[InOutRes],AX
SYS0408: 5F            POP	DI
SYS0409: 07            POP	ES
SYS040A: C3            RET
SYS040B: 8BDC          MOV	BX,SP
SYS040D: 1E            PUSH	DS
SYS040E: 36            SS:
SYS040F: C47F04        LES	DI,[BX+04]
SYS0412: 26            ES:
SYS0413: C5550C        LDS	DX,[DI:BufPtr]
SYS0416: 26            ES:
SYS0417: 8B4D04        MOV	CX,[DI:BufSize]
SYS041A: 26            ES:
SYS041B: 8B1D          MOV	BX,[DI:Handle]
SYS041D: B43F          MOV	AH,3F
SYS041F: CD21          INT	21
SYS0421: 7210          JB	0433
SYS0423: 26            ES:
SYS0424: 89450A        MOV	[DI:BufEnd],AX
SYS0427: 33C0          XOR	AX,AX
SYS0429: 26            ES:
SYS042A: C745080000    MOV	WORD PTR [DI:BufPos],0000
SYS042F: 1F            POP	DS
SYS0430: CA0400        RETF	0004
SYS0433: 26            ES:
SYS0434: C7450A0000    MOV	WORD PTR [DI:BufEnd],0000
SYS0439: EBEE          JMP	0429
SYS043B: 8BDC          MOV	BX,SP
SYS043D: 1E            PUSH	DS
SYS043E: 36            SS:
SYS043F: C47F04        LES	DI,[BX+04]
SYS0442: 26            ES:
SYS0443: C5550C        LDS	DX,[DI:BufPtr]
SYS0446: 33C9          XOR	CX,CX
SYS0448: 26            ES:
SYS0449: 874D08        XCHG	CX,[DI:BufPos]
SYS044C: 26            ES:
SYS044D: 8B1D          MOV	BX,[DI:Handle]
SYS044F: B440          MOV	AH,40
SYS0451: CD21          INT	21
SYS0453: 7207          JB	045C
SYS0455: 2BC1          SUB	AX,CX
SYS0457: 7403          JZ	045C
SYS0459: B86500        MOV	AX,0065
SYS045C: 1F            POP	DS
SYS045D: CA0400        RETF	0004
SYS0460: 8BDC          MOV	BX,SP
SYS0462: 1E            PUSH	DS
SYS0463: 36            SS:
SYS0464: C47F04        LES	DI,[BX+04]
SYS0467: 26            ES:
SYS0468: C5550C        LDS	DX,[DI:BufPtr]
SYS046B: 33C9          XOR	CX,CX
SYS046D: 26            ES:
SYS046E: 874D08        XCHG	CX,[DI:BufPos]
SYS0471: 26            ES:
SYS0472: 8B1D          MOV	BX,[DI:Handle]
SYS0474: B440          MOV	AH,40
SYS0476: CD21          INT	21
SYS0478: 7202          JB	047C
SYS047A: 33C0          XOR	AX,AX
SYS047C: 1F            POP	DS
SYS047D: CA0400        RETF	0004
SYS0480: 8BDC          MOV	BX,SP
SYS0482: 36            SS:
SYS0483: C47F04        LES	DI,[BX+04]
SYS0486: 26            ES:
SYS0487: 8B1D          MOV	BX,[DI:Handle]
SYS0489: 83FB04        CMP	BX,+04
SYS048C: 7606          JBE	0494
SYS048E: B43E          MOV	AH,3E
SYS0490: CD21          INT	21
SYS0492: 7202          JB	0496
SYS0494: 33C0          XOR	AX,AX
SYS0496: CA0400        RETF	0004
SYS0499: 8BDC          MOV	BX,SP
SYS049B: 1E            PUSH	DS
SYS049C: 36            SS:
SYS049D: C57F04        LDS	DI,[BX+04]
SYS04A0: 33C9          XOR	CX,CX
SYS04A2: 890D          MOV	[DI:Handle],CX
SYS04A4: B8003D        MOV	AX,3D00
SYS04A7: 817D02B1D7    CMP	WORD PTR [DI:Mode],fmInput
SYS04AC: 740D          JZ	04BB
SYS04AE: B002          MOV	AL,02
SYS04B0: FF05          INC	WORD PTR [DI:Handle]
SYS04B2: 817D02B3D7    CMP	WORD PTR [DI:Mode],fmInOut
SYS04B7: 7402          JZ	04BB
SYS04B9: B43C          MOV	AH,3C
SYS04BB: 807D3000      CMP	BYTE PTR [DI:Name],00
SYS04BF: 7409          JZ	04CA
SYS04C1: 8D5530        LEA	DX,[DI:Name]
SYS04C4: CD21          INT	21
SYS04C6: 725A          JB	0522
SYS04C8: 8905          MOV	[DI:Handle],AX
SYS04CA: B80B04        MOV	AX,040B
SYS04CD: BA7007        MOV	DX,SYS
SYS04D0: 33C9          XOR	CX,CX
SYS04D2: 33DB          XOR	BX,BX
SYS04D4: 817D02B1D7    CMP	WORD PTR [DI:Mode],fmInput
SYS04D9: 742F          JZ	050A
SYS04DB: 8B1D          MOV	BX,[DI:Handle]
SYS04DD: B80044        MOV	AX,4400
SYS04E0: CD21          INT	21
SYS04E2: F6C280        TEST	DL,80
SYS04E5: B86004        MOV	AX,0460
SYS04E8: BA7007        MOV	DX,SYS
SYS04EB: 8BC8          MOV	CX,AX
SYS04ED: 8BDA          MOV	BX,DX
SYS04EF: 7514          JNZ	0505
SYS04F1: 817D02B3D7    CMP	WORD PTR [DI:Mode],fmInOut
SYS04F6: 7503          JNZ	04FB
SYS04F8: E82B00        CALL	0526
SYS04FB: B83B04        MOV	AX,043B
SYS04FE: BA7007        MOV	DX,SYS
SYS0501: 33C9          XOR	CX,CX
SYS0503: 33DB          XOR	BX,BX
SYS0505: C74502B2D7    MOV	WORD PTR [DI:Mode],fmOutput
SYS050A: 894514        MOV	[DI:InOutFunc.Offset],AX
SYS050D: 895516        MOV	[DI:InOutFunc.Segment],DX
SYS0510: 894D18        MOV	[DI:FlushFunc.Offset],CX
SYS0513: 895D1A        MOV	[DI:FlushFunc.Segment],BX
SYS0516: C7451C8004    MOV	WORD PTR [DI:CloseFunc.Offset],0480
SYS051B: C7451E7007    MOV	WORD PTR [DI:CloseFunc.Segment],SYS
SYS0520: 33C0          XOR	AX,AX
SYS0522: 1F            POP	DS
SYS0523: CA0400        RETF	0004
SYS0526: 33D2          XOR	DX,DX
SYS0528: 33C9          XOR	CX,CX
SYS052A: 8B1D          MOV	BX,[DI:Handle]
SYS052C: B80242        MOV	AX,4202
SYS052F: CD21          INT	21
SYS0531: 2D8000        SUB	AX,SizeOf(TextBuf)
SYS0534: 83DA00        SBB	DX,+00
SYS0537: 7304          JNB	053D
SYS0539: 33C0          XOR	AX,AX
SYS053B: 33D2          XOR	DX,DX
SYS053D: 8BCA          MOV	CX,DX
SYS053F: 8BD0          MOV	DX,AX
SYS0541: 8B1D          MOV	BX,[DI:Handle]
SYS0543: B80042        MOV	AX,4200
SYS0546: CD21          INT	21
SYS0548: 8D958000      LEA	DX,[DI:TextBuf]
SYS054C: B98000        MOV	CX,SizeOf(TextBuf)
SYS054F: 8B1D          MOV	BX,[DI:Handle]
SYS0551: B43F          MOV	AH,3F
SYS0553: CD21          INT	21
SYS0555: 7302          JNB	0559
SYS0557: 33C0          XOR	AX,AX
SYS0559: 33DB          XOR	BX,BX
SYS055B: 3BD8          CMP	BX,AX
SYS055D: 7420          JZ	057F
SYS055F: 80B980001A    CMP	BYTE PTR [BX+DI+TextBuf],1A
SYS0564: 7403          JZ	0569
SYS0566: 43            INC	BX
SYS0567: EBF2          JMP	055B
SYS0569: 8BD3          MOV	DX,BX
SYS056B: 2BD0          SUB	DX,AX
SYS056D: B9FFFF        MOV	CX,FFFF
SYS0570: 8B1D          MOV	BX,[DI:Handle]
SYS0572: B80242        MOV	AX,4202
SYS0575: CD21          INT	21
SYS0577: 33C9          XOR	CX,CX
SYS0579: 8B1D          MOV	BX,[DI:Handle]
SYS057B: B440          MOV	AH,40
SYS057D: CD21          INT	21
SYS057F: C3            RET
SYS0580: BF5000        MOV	DI,0050
SYS0583: 1E            PUSH	DS
SYS0584: 07            POP	ES
SYS0585: B99C02        MOV	CX,SizeOf(DATA)
SYS0588: 2BCF          SUB	CX,DI
SYS058A: D1E9          SHR	CX,1
SYS058C: 33C0          XOR	AX,AX
SYS058E: FC            CLD
SYS058F: F3            REPZ
SYS0590: AB            STOSW
SYS0591: C3            RET
```

[Back](../README.md)