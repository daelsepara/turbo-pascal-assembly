# Files in this repository

## MAIN.PAS

This is the Turbo pascal program that does nothing. It is compiled with Turbo Pascal 7.01 under the DOSBOX 0.74-3 emulation environment. The purpose of this skeleton code is to make it easier to separate user-generated code from the default system library code that is linked with it.


```
program main;
        begin
        end.
end program;
```

The source is compiled using the following commands:
```
C:\TP\BIN\TPC.EXE -GS -GP -GD -$D+ MAIN
```
... to produce an executable named **MAIN.EXE**

Go to: [MAIN.PAS](MAIN-PAS.md) or [Back](../README.md)

## MAIN.MAP

Upon compilation with the above command options, a map file is generated containing the size and offsets of the segments (data, code, stack, heap), the locations of the public symbols in the system library's data segment.

```
 Start  Stop   Length Name               Class

 00000H 00016H 00017H main               CODE
 00020H 005B1H 00592H System             CODE
 005C0H 0085BH 0029CH DATA               DATA
 00860H 0485FH 04000H STACK              STACK
 04860H 04860H 00000H HEAP               HEAP

  Address         Publics by Value

 0000:0000       @
 005C:0002       OvrCodeList
 005C:0004       OvrHeapSize
 005C:0006       OvrDebugPtr
 005C:000A       OvrHeapOrg
 005C:000C       OvrHeapPtr
 005C:000E       OvrHeapEnd
 005C:0010       OvrLoadList
 005C:0012       OvrDosHandle
 005C:0014       OvrEmsHandle
 005C:0016       HeapOrg
 005C:001A       HeapPtr
 005C:001E       HeapEnd
 005C:0022       FreeList
 005C:0026       FreeZero
 005C:002A       HeapError
 005C:002E       ExitProc
 005C:0032       ExitCode
 005C:0034       ErrorAddr
 005C:0038       PrefixSeg
 005C:003A       StackLimit
 005C:003C       InOutRes
 005C:003E       RandSeed
 005C:0042       SelectorInc
 005C:0044       Seg0040
 005C:0046       SegA000
 005C:0048       SegB000
 005C:004A       SegB800
 005C:004C       Test8086
 005C:004D       Test8087
 005C:004E       FileMode
 005C:0050       Input
 005C:0150       Output
 005C:0250       SaveInt00
 005C:0254       SaveInt02
 005C:0258       SaveInt1B
 005C:025C       SaveInt21
 005C:0260       SaveInt23
 005C:0264       SaveInt24
 005C:0268       SaveInt34
 005C:026C       SaveInt35
 005C:0270       SaveInt36
 005C:0274       SaveInt37
 005C:0278       SaveInt38
 005C:027C       SaveInt39
 005C:0280       SaveInt3A
 005C:0284       SaveInt3B
 005C:0288       SaveInt3C
 005C:028C       SaveInt3D
 005C:0290       SaveInt3E
 005C:0294       SaveInt3F
 005C:0298       SaveInt75

Line numbers for main(MAIN.PAS) segment main

     2 0000:0000     3 0000:000F

Program entry point at 0000:0000
```

Go to [MAIN.MAP](MAP.md) or [Back](../README.md)

## MAIN.DMP

This is the disassembled code for MAIN.EXE. Using the .MAP file generated above as well as DOS's basic debugger (**DEBUG.EXE**), we will be annotating the compiled code generated by the Turbo Pascal compiler.

```
AX=FFFF  BX=0000  CX=0B64  DX=0000  SP=4000  BP=0000  SI=0000  DI=0000
DS=PSP   ES=PSP   SS=STCK  CS=CODE  IP=0000   NV UP EI PL NZ NA PO NC

CODE:0000 9A00007007    CALL	SYS:0000
CODE:0005 55            PUSH	BP
CODE:0006 89E5          MOV	BP,SP
CODE:0008 31C0          XOR	AX,AX
CODE:000A 9ACD027007    CALL	SYS:02CD
CODE:000F 5D            POP	BP
CODE:0010 31C0          XOR	AX,AX
CODE:0012 9A16017007    CALL	SYS:0116
```

Go to: [MAIN.DMP](MAIN-DMP.md), the annotated [MAIN](MAIN.md) or [Back](../README.md)

## SYSTEM.DMP

This is the system library linked to the program above. As the main program becomes larger and more complex, this library's starting location will likely change relative to the code segment for the main program above. The MAP file also allows us to annotate the various memory addresses in the code as they usually refer to the public symbols (data) listed in the map. The rest would be trying to figure out what the code does and which BIOS or DOS services it is using.

Because of varying starting location and length, it is possible that the dump here may not be the actual assembled code. Even a slight deviation in the offset where disassembly is started, will propagate the error. Further investigation may minimize such things from happening.

Go to: [SYSTEM.DMP](SYSTEM.md) or [Back](../README.md)

### Code block 01 (0000-0238)
```
SYS:0000 BACA07        MOV	DX,DATA
SYS:0003 8EDA          MOV	DS,DX
SYS:0005 8C063800      MOV	[PrefixSeg],ES
SYS:0009 33ED          XOR	BP,BP
SYS:000B E87205        CALL	0580
SYS:000E E8A000        CALL	00B1
SYS:0011 8BC4          MOV	AX,SP
SYS:0013 051300        ADD	AX,0013
SYS:0016 B104          MOV	CL,04
SYS:0018 D3E8          SHR	AX,CL
SYS:001A 8CD2          MOV	DX,SS
SYS:001C 03C2          ADD	AX,DX
SYS:001E A30A00        MOV	[OvrHeapOrg],AX
SYS:0021 A30C00        MOV	[OvrHeapPtr],AX
SYS:0024 03060400      ADD	AX,[OvrHeapSize]
SYS:0028 A30E00        MOV	[OvrHeapEnd],AX
SYS:002B A31800        MOV	[HeapOrg:SEG],AX
SYS:002E A31C00        MOV	[HeapPtr:SEG],AX
SYS:0031 A32400        MOV	[FreeList:SEG],AX
SYS:0034 8E063800      MOV	ES,[PrefixSeg]
SYS:0038 26            ES:
SYS:0039 A10200        MOV	AX,[0002]
SYS:003C A32000        MOV	[HeapEnd:SEG],AX
SYS:003F C7062A00D600  MOV	WORD PTR [HeapError:OFF],00D6
SYS:0045 8C0E2C00      MOV	[HeapError:SEG],CS
SYS:0049 BF5002        MOV	DI,0250
SYS:004C BE3902        MOV	SI,0239
SYS:004F B91300        MOV	CX,0013
SYS:0052 90            NOP
SYS:0053 FC            CLD
SYS:0054 2E            CS:
SYS:0055 AC            LODSB
SYS:0056 B435          MOV	AH,35
SYS:0058 CD21          INT	21
SYS:005A 891D          MOV	[DI],BX
SYS:005C 8C4502        MOV	[DI+02],ES
SYS:005F 83C704        ADD	DI,+04
SYS:0062 E2EF          LOOP	0053
SYS:0064 1E            PUSH	DS
SYS:0065 0E            PUSH	CS
SYS:0066 1F            POP	DS
SYS:0067 BA0C01        MOV	DX,010C
SYS:006A B80025        MOV	AX,2500
SYS:006D CD21          INT	21
SYS:006F BA1301        MOV	DX,0113
SYS:0072 B82325        MOV	AX,2523
SYS:0075 CD21          INT	21
SYS:0077 BADB00        MOV	DX,00DB
SYS:007A B82425        MOV	AX,2524
SYS:007D CD21          INT	21
SYS:007F BA0401        MOV	DX,0104
SYS:0082 B83F25        MOV	AX,253F
SYS:0085 CD21          INT	21
SYS:0087 1F            POP	DS
SYS:0088 B85000        MOV	AX,OFFSET Input
SYS:008B 1E            PUSH	DS
SYS:008C 50            PUSH	AX
SYS:008D 1E            PUSH	DS
SYS:008E 50            PUSH	AX
SYS:008F B86302        MOV	AX,0263
SYS:0092 0E            PUSH	CS
SYS:0093 50            PUSH	AX
SYS:0094 0E            PUSH	CS
SYS:0095 E84E02        CALL	02E6
SYS:0098 0E            PUSH	CS
SYS:0099 E8C802        CALL	0364
SYS:009C B85001        MOV	AX,OFFSET Output
SYS:009F 1E            PUSH	DS
SYS:00A0 50            PUSH	AX
SYS:00A1 1E            PUSH	DS
SYS:00A2 50            PUSH	AX
SYS:00A3 B86302        MOV	AX,0263
SYS:00A6 0E            PUSH	CS
SYS:00A7 50            PUSH	AX
SYS:00A8 0E            PUSH	CS
SYS:00A9 E83A02        CALL	02E6
SYS:00AC 0E            PUSH	CS
SYS:00AD E8B902        CALL	0369
SYS:00B0 CB            RETF
SYS:00B1 33C0          XOR	AX,AX
SYS:00B3 9C            PUSHF
SYS:00B4 5B            POP	BX
SYS:00B5 80E70F        AND	BH,0F
SYS:00B8 53            PUSH	BX
SYS:00B9 9D            POPF
SYS:00BA 9C            PUSHF
SYS:00BB 59            POP	CX
SYS:00BC 80E5F0        AND	CH,F0
SYS:00BF 80FDF0        CMP	CH,F0
SYS:00C2 740E          JZ	00D2
SYS:00C4 40            INC	AX
SYS:00C5 80CFF0        OR	BH,F0
SYS:00C8 53            PUSH	BX
SYS:00C9 9D            POPF
SYS:00CA 9C            PUSHF
SYS:00CB 59            POP	CX
SYS:00CC 80E5F0        AND	CH,F0
SYS:00CF 7401          JZ	00D2
SYS:00D1 40            INC	AX
SYS:00D2 A24C00        MOV	[Test8086],AL
SYS:00D5 C3            RET
SYS:00D6 33C0          XOR	AX,AX
SYS:00D8 CA0200        RETF	0002
SYS:00DB FB            STI
SYS:00DC 83C406        ADD	SP,+06
SYS:00DF 58            POP	AX
SYS:00E0 83E71F        AND	DI,+1F
SYS:00E3 81C79600      ADD	DI,0096
SYS:00E7 80FC39        CMP	AH,39
SYS:00EA 7303          JNB	00EF
SYS:00EC BFFFFF        MOV	DI,FFFF
SYS:00EF 57            PUSH	DI
SYS:00F0 B454          MOV	AH,54
SYS:00F2 CD21          INT	21
SYS:00F4 8BEC          MOV	BP,SP
SYS:00F6 804E1601      OR	BYTE PTR [BP+16],01
SYS:00FA 58            POP	AX
SYS:00FB 5B            POP	BX
SYS:00FC 59            POP	CX
SYS:00FD 5A            POP	DX
SYS:00FE 5E            POP	SI
SYS:00FF 5F            POP	DI
SYS:0100 5D            POP	BP
SYS:0101 1F            POP	DS
SYS:0102 07            POP	ES
SYS:0103 CF            IRET
SYS:0104 B8D000        MOV	AX,00D0
SYS:0107 83C406        ADD	SP,+06
SYS:010A EB03          JMP	010F
SYS:010C B8C800        MOV	AX,00C8
SYS:010F 59            POP	CX
SYS:0110 5B            POP	BX
SYS:0111 EB07          JMP	011A
SYS:0113 B8FF00        MOV	AX,00FF
SYS:0116 33C9          XOR	CX,CX
SYS:0118 33DB          XOR	BX,BX
SYS:011A BACA07        MOV	DX,DATA
SYS:011D 8EDA          MOV	DS,DX
SYS:011F FB            STI
SYS:0120 A33200        MOV	[ExitCode],AX
SYS:0123 8BC1          MOV	AX,CX
SYS:0125 0BC3          OR	AX,BX
SYS:0127 743D          JZ	0166
SYS:0129 A11000        MOV	AX,[OvrLoadList]
SYS:012C 0BC0          OR	AX,AX
SYS:012E 742F          JZ	015F
SYS:0130 8EC0          MOV	ES,AX
SYS:0132 26            ES:
SYS:0133 A11000        MOV	AX,[OvrLoadList]
SYS:0136 0BC0          OR	AX,AX
SYS:0138 741B          JZ	0155
SYS:013A 2BC3          SUB	AX,BX
SYS:013C 7717          JA	0155
SYS:013E F7D8          NEG	AX
SYS:0140 3D0010        CMP	AX,1000
SYS:0143 7310          JNB	0155
SYS:0145 BA1000        MOV	DX,0010
SYS:0148 F7E2          MUL	DX
SYS:014A 03C1          ADD	AX,CX
SYS:014C 7207          JB	0155
SYS:014E 26            ES:
SYS:014F 3B060800      CMP	AX,[OvrDebugPtr:SEG]
SYS:0153 7206          JB	015B
SYS:0155 26            ES:
SYS:0156 A11400        MOV	AX,[OvrEmsHandle]
SYS:0159 EBD1          JMP	012C
SYS:015B 8BC8          MOV	CX,AX
SYS:015D 8CC3          MOV	BX,ES
SYS:015F 2B1E3800      SUB	BX,[PrefixSeg]
SYS:0163 83EB10        SUB	BX,+10
SYS:0166 890E3400      MOV	[ErrorAddr:OFF],CX
SYS:016A 891E3600      MOV	[ErrorAddr:SEG],BX
SYS:016E C41E2E00      LES	BX,[ExitProc:OFF]
SYS:0172 8CC0          MOV	AX,ES
SYS:0174 0BC3          OR	AX,BX
SYS:0176 7413          JZ	018B
SYS:0178 33C0          XOR	AX,AX
SYS:017A A32E00        MOV	[ExitProc:OFF],AX
SYS:017D A33000        MOV	[ExitProc:SEG],AX
SYS:0180 A33C00        MOV	[InOutRes],AX
SYS:0183 B86E01        MOV	AX,016E
SYS:0186 0E            PUSH	CS
SYS:0187 50            PUSH	AX
SYS:0188 06            PUSH	ES
SYS:0189 53            PUSH	BX
SYS:018A CB            RETF
SYS:018B B85000        MOV	AX,OFFSET Input
SYS:018E 1E            PUSH	DS
SYS:018F 50            PUSH	AX
SYS:0190 0E            PUSH	CS
SYS:0191 E82A02        CALL	03BE
SYS:0194 B85001        MOV	AX,OFFSET Output
SYS:0197 1E            PUSH	DS
SYS:0198 50            PUSH	AX
SYS:0199 0E            PUSH	CS
SYS:019A E82102        CALL	03BE
SYS:019D BF5002        MOV	DI,0250
SYS:01A0 BE3902        MOV	SI,0239
SYS:01A3 B91300        MOV	CX,0013
SYS:01A6 90            NOP
SYS:01A7 FC            CLD
SYS:01A8 2E            CS:
SYS:01A9 AC            LODSB
SYS:01AA B425          MOV	AH,25
SYS:01AC 1E            PUSH	DS
SYS:01AD C515          LDS	DX,[DI]
SYS:01AF CD21          INT	21
SYS:01B1 1F            POP	DS
SYS:01B2 83C704        ADD	DI,+04
SYS:01B5 E2F0          LOOP	01A7
SYS:01B7 A13400        MOV	AX,[ErrorAddr:OFF]
SYS:01BA 0B063600      OR	AX,[ErrorAddr:SEG]
SYS:01BE 7429          JZ	01E9
SYS:01C0 BB4C02        MOV	BX,024C
SYS:01C3 E82A00        CALL	01F0
SYS:01C6 A13200        MOV	AX,[ExitCode]
SYS:01C9 E83200        CALL	01FE
SYS:01CC BB5B02        MOV	BX,025B
SYS:01CF E81E00        CALL	01F0
SYS:01D2 A13600        MOV	AX,[ErrorAddr:SEG]
SYS:01D5 E84000        CALL	0218
SYS:01D8 B03A          MOV	AL,3A
SYS:01DA E85500        CALL	0232
SYS:01DD A13400        MOV	AX,[ErrorAddr:OFF]
SYS:01E0 E83500        CALL	0218
SYS:01E3 BB6002        MOV	BX,0260
SYS:01E6 E80700        CALL	01F0
SYS:01E9 A13200        MOV	AX,[ExitCode]
SYS:01EC B44C          MOV	AH,4C
SYS:01EE CD21          INT	21
SYS:01F0 2E            CS:
SYS:01F1 8A07          MOV	AL,[BX]
SYS:01F3 0AC0          OR	AL,AL
SYS:01F5 7406          JZ	01FD
SYS:01F7 E83800        CALL	0232
SYS:01FA 43            INC	BX
SYS:01FB EBF3          JMP	01F0
SYS:01FD C3            RET
SYS:01FE B164          MOV	CL,64
SYS:0200 E80700        CALL	020A
SYS:0203 B10A          MOV	CL,0A
SYS:0205 E80200        CALL	020A
SYS:0208 EB04          JMP	020E
SYS:020A 32E4          XOR	AH,AH
SYS:020C F6F1          DIV	CL
SYS:020E 0430          ADD	AL,30
SYS:0210 50            PUSH	AX
SYS:0211 E81E00        CALL	0232
SYS:0214 58            POP	AX
SYS:0215 8AC4          MOV	AL,AH
SYS:0217 C3            RET
SYS:0218 50            PUSH	AX
SYS:0219 8AC4          MOV	AL,AH
SYS:021B E80100        CALL	021F
SYS:021E 58            POP	AX
SYS:021F 50            PUSH	AX
SYS:0220 B104          MOV	CL,04
SYS:0222 D2E8          SHR	AL,CL
SYS:0224 E80300        CALL	022A
SYS:0227 58            POP	AX
SYS:0228 240F          AND	AL,0F
SYS:022A 0430          ADD	AL,30
SYS:022C 3C3A          CMP	AL,3A
SYS:022E 7202          JB	0232
SYS:0230 0407          ADD	AL,07
SYS:0232 8AD0          MOV	DL,AL
SYS:0234 B406          MOV	AH,06
SYS:0236 CD21          INT	21
SYS:0238 C3            RET
```

### Data block 01 (023A-0289)

```
SYS:0230                             00 02 1B 21 23 24 34            ...!#$4
SYS:0240  35 36 37 38 39 3A 3B 3C-3D 3E 3F 75 52 75 6E 74   56789:;<=>?uRunt
SYS:0250  69 6D 65 20 65 72 72 6F-72 20 00 20 61 74 20 00   ime error . at .
SYS:0260  2E 0D 0A 00 50 6F 72 74-69 6F 6E 73 20 43 6F 70   ....Portions Cop
SYS:0270  79 72 69 67 68 74 20 28-63 29 20 31 39 38 33 2C   yright (c) 1983,
SYS:0280  39 32 20 42 6F 72 6C 61-6E 64                     92 Borland
```

### Code block 02 (028A-02E2)
```
SYS:028A 33C0          XOR	AX,AX
SYS:028C 87063C00      XCHG	AX,[InOutRes]
SYS:0290 CB            RETF
SYS:0291 833E3C0000    CMP	WORD PTR [InOutRes],+00
SYS:0296 7501          JNZ	0299
SYS:0298 CB            RETF
SYS:0299 A13C00        MOV	AX,[InOutRes]
SYS:029C E970FE        JMP	010F
SYS:029F 8BF4          MOV	SI,SP
SYS:02A1 36            SS:
SYS:02A2 8E4402        MOV	ES,[SI+02]
SYS:02A5 26            ES:
SYS:02A6 3B5502        CMP	DX,[DI+02]
SYS:02A9 7F07          JG	02B2
SYS:02AB 7C14          JL	02C1
SYS:02AD 26            ES:
SYS:02AE 3B05          CMP	AX,[DI]
SYS:02B0 720F          JB	02C1
SYS:02B2 26            ES:
SYS:02B3 3B5506        CMP	DX,[DI+06]
SYS:02B6 7C08          JL	02C0
SYS:02B8 7F07          JG	02C1
SYS:02BA 26            ES:
SYS:02BB 3B4504        CMP	AX,[DI+04]
SYS:02BE 7701          JA	02C1
SYS:02C0 CB            RETF
SYS:02C1 B8C900        MOV	AX,00C9
SYS:02C4 E948FE        JMP	010F
SYS:02C7 B8D700        MOV	AX,00D7
SYS:02CA E942FE        JMP	010F
SYS:02CD 050002        ADD	AX,0200
SYS:02D0 720D          JB	02DF
SYS:02D2 2BC4          SUB	AX,SP
SYS:02D4 7309          JNB	02DF
SYS:02D6 F7D8          NEG	AX
SYS:02D8 3B063A00      CMP	AX,[StackLimit]
SYS:02DC 7201          JB	02DF
SYS:02DE CB            RETF
SYS:02DF B8CA00        MOV	AX,00CA
SYS:02E2 E92AFE        JMP	010F
```

### Data block 02 (02E5)
```
SYS:02E5 BA
```

### Code block 03 (02E6-0591)
```
SYS:02E6 33D2          XOR	DX,DX
SYS:02E8 8BDC          MOV	BX,SP
SYS:02EA 1E            PUSH	DS
SYS:02EB 36            SS:
SYS:02EC C47F08        LES	DI,[BX+08]
SYS:02EF 36            SS:
SYS:02F0 C57704        LDS	SI,[BX+04]
SYS:02F3 FC            CLD
SYS:02F4 33C0          XOR	AX,AX
SYS:02F6 AB            STOSW
SYS:02F7 B8B0D7        MOV	AX,D7B0
SYS:02FA AB            STOSW
SYS:02FB B88000        MOV	AX,0080
SYS:02FE AB            STOSW
SYS:02FF 33C0          XOR	AX,AX
SYS:0301 AB            STOSW
SYS:0302 AB            STOSW
SYS:0303 AB            STOSW
SYS:0304 8D4574        LEA	AX,[DI+74]
SYS:0307 AB            STOSW
SYS:0308 8CC0          MOV	AX,ES
SYS:030A AB            STOSW
SYS:030B B89904        MOV	AX,0499
SYS:030E AB            STOSW
SYS:030F B87007        MOV	AX,SYS
SYS:0312 AB            STOSW
SYS:0313 33C0          XOR	AX,AX
SYS:0315 B90E00        MOV	CX,000E
SYS:0318 F3            REPZ
SYS:0319 AB            STOSW
SYS:031A B94F00        MOV	CX,004F
SYS:031D 0BD2          OR	DX,DX
SYS:031F 7509          JNZ	032A
SYS:0321 AC            LODSB
SYS:0322 3AC8          CMP	CL,AL
SYS:0324 7604          JBE	032A
SYS:0326 8AC8          MOV	CL,AL
SYS:0328 E308          JCXZ	0332
SYS:032A AC            LODSB
SYS:032B 0AC0          OR	AL,AL
SYS:032D 7403          JZ	0332
SYS:032F AA            STOSB
SYS:0330 E2F8          LOOP	032A
SYS:0332 32C0          XOR	AL,AL
SYS:0334 AA            STOSB
SYS:0335 1F            POP	DS
SYS:0336 CA0800        RETF	0008
SYS:0339 8BDC          MOV	BX,SP
SYS:033B 36            SS:
SYS:033C C47F0A        LES	DI,[BX+0A]
SYS:033F 36            SS:
SYS:0340 8B4704        MOV	AX,[BX+04]
SYS:0343 26            ES:
SYS:0344 894504        MOV	[DI+04],AX
SYS:0347 36            SS:
SYS:0348 8B4706        MOV	AX,[BX+06]
SYS:034B 26            ES:
SYS:034C 89450C        MOV	[DI+0C],AX
SYS:034F 36            SS:
SYS:0350 8B4708        MOV	AX,[BX+08]
SYS:0353 26            ES:
SYS:0354 89450E        MOV	[DI+0E],AX
SYS:0357 33C0          XOR	AX,AX
SYS:0359 26            ES:
SYS:035A 894508        MOV	[DI+08],AX
SYS:035D 26            ES:
SYS:035E 89450A        MOV	[DI+0A],AX
SYS:0361 CA0A00        RETF	000A
SYS:0364 BAB1D7        MOV	DX,D7B1
SYS:0367 EB08          JMP	0371
SYS:0369 BAB2D7        MOV	DX,D7B2
SYS:036C EB03          JMP	0371
SYS:036E BAB3D7        MOV	DX,D7B3
SYS:0371 55            PUSH	BP
SYS:0372 8BEC          MOV	BP,SP
SYS:0374 C47E06        LES	DI,[BP+06]
SYS:0377 26            ES:
SYS:0378 8B4502        MOV	AX,[DI+02]
SYS:037B 3DB1D7        CMP	AX,D7B1
SYS:037E 7412          JZ	0392
SYS:0380 3DB2D7        CMP	AX,D7B2
SYS:0383 740D          JZ	0392
SYS:0385 3DB0D7        CMP	AX,D7B0
SYS:0388 7410          JZ	039A
SYS:038A C7063C006600  MOV	WORD PTR [InOutRes],0066
SYS:0390 EB24          JMP	03B6
SYS:0392 52            PUSH	DX
SYS:0393 06            PUSH	ES
SYS:0394 57            PUSH	DI
SYS:0395 0E            PUSH	CS
SYS:0396 E82500        CALL	03BE
SYS:0399 5A            POP	DX
SYS:039A 33C0          XOR	AX,AX
SYS:039C 26            ES:
SYS:039D 895502        MOV	[DI+02],DX
SYS:03A0 26            ES:
SYS:03A1 894508        MOV	[DI+08],AX
SYS:03A4 26            ES:
SYS:03A5 89450A        MOV	[DI+0A],AX
SYS:03A8 BB1000        MOV	BX,0010
SYS:03AB E84C00        CALL	03FA
SYS:03AE 7406          JZ	03B6
SYS:03B0 26            ES:
SYS:03B1 C74502B0D7    MOV	WORD PTR [DI+02],D7B0
SYS:03B6 5D            POP	BP
SYS:03B7 CA0400        RETF	0004
SYS:03BA B000          MOV	AL,00
SYS:03BC EB02          JMP	03C0
SYS:03BE B001          MOV	AL,01
SYS:03C0 55            PUSH	BP
SYS:03C1 8BEC          MOV	BP,SP
SYS:03C3 C47E06        LES	DI,[BP+06]
SYS:03C6 26            ES:
SYS:03C7 817D02B1D7    CMP	WORD PTR [DI+02],D7B1
SYS:03CC 7418          JZ	03E6
SYS:03CE 26            ES:
SYS:03CF 817D02B2D7    CMP	WORD PTR [DI+02],D7B2
SYS:03D4 7408          JZ	03DE
SYS:03D6 C7063C006700  MOV	WORD PTR [InOutRes],0067
SYS:03DC EB18          JMP	03F6
SYS:03DE 50            PUSH	AX
SYS:03DF BB1400        MOV	BX,0014
SYS:03E2 E81500        CALL	03FA
SYS:03E5 58            POP	AX
SYS:03E6 0AC0          OR	AL,AL
SYS:03E8 740C          JZ	03F6
SYS:03EA BB1C00        MOV	BX,001C
SYS:03ED E80A00        CALL	03FA
SYS:03F0 26            ES:
SYS:03F1 C74502B0D7    MOV	WORD PTR [DI+02],D7B0
SYS:03F6 5D            POP	BP
SYS:03F7 CA0400        RETF	0004
SYS:03FA 06            PUSH	ES
SYS:03FB 57            PUSH	DI
SYS:03FC 06            PUSH	ES
SYS:03FD 57            PUSH	DI
SYS:03FE 26            ES:
SYS:03FF FF19          CALL	FAR [BX+DI]
SYS:0401 0BC0          OR	AX,AX
SYS:0403 7403          JZ	0408
SYS:0405 A33C00        MOV	[InOutRes],AX
SYS:0408 5F            POP	DI
SYS:0409 07            POP	ES
SYS:040A C3            RET
SYS:040B 8BDC          MOV	BX,SP
SYS:040D 1E            PUSH	DS
SYS:040E 36            SS:
SYS:040F C47F04        LES	DI,[BX+04]
SYS:0412 26            ES:
SYS:0413 C5550C        LDS	DX,[DI+0C]
SYS:0416 26            ES:
SYS:0417 8B4D04        MOV	CX,[DI+04]
SYS:041A 26            ES:
SYS:041B 8B1D          MOV	BX,[DI]
SYS:041D B43F          MOV	AH,3F
SYS:041F CD21          INT	21
SYS:0421 7210          JB	0433
SYS:0423 26            ES:
SYS:0424 89450A        MOV	[DI+0A],AX
SYS:0427 33C0          XOR	AX,AX
SYS:0429 26            ES:
SYS:042A C745080000    MOV	WORD PTR [DI+08],0000
SYS:042F 1F            POP	DS
SYS:0430 CA0400        RETF	0004
SYS:0433 26            ES:
SYS:0434 C7450A0000    MOV	WORD PTR [DI+0A],0000
SYS:0439 EBEE          JMP	0429
SYS:043B 8BDC          MOV	BX,SP
SYS:043D 1E            PUSH	DS
SYS:043E 36            SS:
SYS:043F C47F04        LES	DI,[BX+04]
SYS:0442 26            ES:
SYS:0443 C5550C        LDS	DX,[DI+0C]
SYS:0446 33C9          XOR	CX,CX
SYS:0448 26            ES:
SYS:0449 874D08        XCHG	CX,[DI+08]
SYS:044C 26            ES:
SYS:044D 8B1D          MOV	BX,[DI]
SYS:044F B440          MOV	AH,40
SYS:0451 CD21          INT	21
SYS:0453 7207          JB	045C
SYS:0455 2BC1          SUB	AX,CX
SYS:0457 7403          JZ	045C
SYS:0459 B86500        MOV	AX,0065
SYS:045C 1F            POP	DS
SYS:045D CA0400        RETF	0004
SYS:0460 8BDC          MOV	BX,SP
SYS:0462 1E            PUSH	DS
SYS:0463 36            SS:
SYS:0464 C47F04        LES	DI,[BX+04]
SYS:0467 26            ES:
SYS:0468 C5550C        LDS	DX,[DI+0C]
SYS:046B 33C9          XOR	CX,CX
SYS:046D 26            ES:
SYS:046E 874D08        XCHG	CX,[DI+08]
SYS:0471 26            ES:
SYS:0472 8B1D          MOV	BX,[DI]
SYS:0474 B440          MOV	AH,40
SYS:0476 CD21          INT	21
SYS:0478 7202          JB	047C
SYS:047A 33C0          XOR	AX,AX
SYS:047C 1F            POP	DS
SYS:047D CA0400        RETF	0004
SYS:0480 8BDC          MOV	BX,SP
SYS:0482 36            SS:
SYS:0483 C47F04        LES	DI,[BX+04]
SYS:0486 26            ES:
SYS:0487 8B1D          MOV	BX,[DI]
SYS:0489 83FB04        CMP	BX,+04
SYS:048C 7606          JBE	0494
SYS:048E B43E          MOV	AH,3E
SYS:0490 CD21          INT	21
SYS:0492 7202          JB	0496
SYS:0494 33C0          XOR	AX,AX
SYS:0496 CA0400        RETF	0004
SYS:0499 8BDC          MOV	BX,SP
SYS:049B 1E            PUSH	DS
SYS:049C 36            SS:
SYS:049D C57F04        LDS	DI,[BX+04]
SYS:04A0 33C9          XOR	CX,CX
SYS:04A2 890D          MOV	[DI],CX
SYS:04A4 B8003D        MOV	AX,3D00
SYS:04A7 817D02B1D7    CMP	WORD PTR [DI+02],D7B1
SYS:04AC 740D          JZ	04BB
SYS:04AE B002          MOV	AL,02
SYS:04B0 FF05          INC	WORD PTR [DI]
SYS:04B2 817D02B3D7    CMP	WORD PTR [DI+02],D7B3
SYS:04B7 7402          JZ	04BB
SYS:04B9 B43C          MOV	AH,3C
SYS:04BB 807D3000      CMP	BYTE PTR [DI+30],00
SYS:04BF 7409          JZ	04CA
SYS:04C1 8D5530        LEA	DX,[DI+30]
SYS:04C4 CD21          INT	21
SYS:04C6 725A          JB	0522
SYS:04C8 8905          MOV	[DI],AX
SYS:04CA B80B04        MOV	AX,040B
SYS:04CD BA7007        MOV	DX,SYS
SYS:04D0 33C9          XOR	CX,CX
SYS:04D2 33DB          XOR	BX,BX
SYS:04D4 817D02B1D7    CMP	WORD PTR [DI+02],D7B1
SYS:04D9 742F          JZ	050A
SYS:04DB 8B1D          MOV	BX,[DI]
SYS:04DD B80044        MOV	AX,4400
SYS:04E0 CD21          INT	21
SYS:04E2 F6C280        TEST	DL,80
SYS:04E5 B86004        MOV	AX,0460
SYS:04E8 BA7007        MOV	DX,SYS
SYS:04EB 8BC8          MOV	CX,AX
SYS:04ED 8BDA          MOV	BX,DX
SYS:04EF 7514          JNZ	0505
SYS:04F1 817D02B3D7    CMP	WORD PTR [DI+02],D7B3
SYS:04F6 7503          JNZ	04FB
SYS:04F8 E82B00        CALL	0526
SYS:04FB B83B04        MOV	AX,043B
SYS:04FE BA7007        MOV	DX,SYS
SYS:0501 33C9          XOR	CX,CX
SYS:0503 33DB          XOR	BX,BX
SYS:0505 C74502B2D7    MOV	WORD PTR [DI+02],D7B2
SYS:050A 894514        MOV	[DI+14],AX
SYS:050D 895516        MOV	[DI+16],DX
SYS:0510 894D18        MOV	[DI+18],CX
SYS:0513 895D1A        MOV	[DI+1A],BX
SYS:0516 C7451C8004    MOV	WORD PTR [DI+1C],0480
SYS:051B C7451E7007    MOV	WORD PTR [DI+1E],SYS
SYS:0520 33C0          XOR	AX,AX
SYS:0522 1F            POP	DS
SYS:0523 CA0400        RETF	0004
SYS:0526 33D2          XOR	DX,DX
SYS:0528 33C9          XOR	CX,CX
SYS:052A 8B1D          MOV	BX,[DI]
SYS:052C B80242        MOV	AX,4202
SYS:052F CD21          INT	21
SYS:0531 2D8000        SUB	AX,0080
SYS:0534 83DA00        SBB	DX,+00
SYS:0537 7304          JNB	053D
SYS:0539 33C0          XOR	AX,AX
SYS:053B 33D2          XOR	DX,DX
SYS:053D 8BCA          MOV	CX,DX
SYS:053F 8BD0          MOV	DX,AX
SYS:0541 8B1D          MOV	BX,[DI]
SYS:0543 B80042        MOV	AX,4200
SYS:0546 CD21          INT	21
SYS:0548 8D958000      LEA	DX,[DI+0080]
SYS:054C B98000        MOV	CX,0080
SYS:054F 8B1D          MOV	BX,[DI]
SYS:0551 B43F          MOV	AH,3F
SYS:0553 CD21          INT	21
SYS:0555 7302          JNB	0559
SYS:0557 33C0          XOR	AX,AX
SYS:0559 33DB          XOR	BX,BX
SYS:055B 3BD8          CMP	BX,AX
SYS:055D 7420          JZ	057F
SYS:055F 80B980001A    CMP	BYTE PTR [BX+DI+0080],1A
SYS:0564 7403          JZ	0569
SYS:0566 43            INC	BX
SYS:0567 EBF2          JMP	055B
SYS:0569 8BD3          MOV	DX,BX
SYS:056B 2BD0          SUB	DX,AX
SYS:056D B9FFFF        MOV	CX,FFFF
SYS:0570 8B1D          MOV	BX,[DI]
SYS:0572 B80242        MOV	AX,4202
SYS:0575 CD21          INT	21
SYS:0577 33C9          XOR	CX,CX
SYS:0579 8B1D          MOV	BX,[DI]
SYS:057B B440          MOV	AH,40
SYS:057D CD21          INT	21
SYS:057F C3            RET
SYS:0580 BF5000        MOV	DI,OFFSET Input
SYS:0583 1E            PUSH	DS
SYS:0584 07            POP	ES
SYS:0585 B99C02        MOV	CX,029C
SYS:0588 2BCF          SUB	CX,DI
SYS:058A D1E9          SHR	CX,1
SYS:058C 33C0          XOR	AX,AX
SYS:058E FC            CLD
SYS:058F F3            REPZ
SYS:0590 AB            STOSW
SYS:0591 C3            RET
```

[Go back](../README.md)